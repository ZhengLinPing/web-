# js内存泄漏

## 什么事内存泄漏
  程序的运行需要内存。只要程序提出要求，操作系统或者运行时（runtime）就必须供给内存。
  对于持续运行的服务进程（daemon），必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。

* 不再用到的内存，没有及时释放，就叫做内存泄漏（memory leak）。

## 垃圾回收机制
  最常使用的方法叫做"引用计数"（reference counting）：语言引擎有一张"引用表"，保存了内存里面所有的资源（通常是各种值）的引用次数。如果一个值的引用次数是0，就表示这个值不再用到了，因此可以将这块内存释放。

* 例子:
```
  let arr = {
    a : '我在内存中',
    b : '123'
  }
  console.log('arr是对这个对象的引用,或者可以理解为指针')
```
- 这里引用计数为1，因为通过调用arr，始终可以再一次使用这个对象

```
  arr = null;
```
- arr重置为null，则那个对象引用计数为0，再也无法使用那个对象，内存释放

-
  因此，并不是说有了垃圾回收机制，程序员就轻松了。你还是需要关注内存占用：那些很占空间的值，一旦不再用到，你必须检查是否还存在对它们的引用。如果是的话，就必须手动解除引用

## 内存泄漏的识别方法

*
  如果连续五次垃圾回收之后，内存占用一次比一次大，就有内存泄漏。这就要求实时查看内存占用。

* 参考:http://www.ruanyifeng.com/blog/2017/04/memory-leak.html
